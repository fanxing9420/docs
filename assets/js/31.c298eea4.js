(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{773:function(t,a,e){"use strict";e.r(a);var v=e(45),_=Object(v.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"mysql-约束"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql-约束"}},[t._v("#")]),t._v(" MySQL—约束")]),t._v(" "),e("h3",{attrs:{id:"概述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),e("p",[t._v("1.概念:约束是作用于表中字段上的规则，用于限制存储在表中的数据。")]),t._v(" "),e("p",[t._v("2.目的:保证数据库中数据的正确、有效性和完整性。")]),t._v(" "),e("p",[t._v("3.分类:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("约束")]),t._v(" "),e("th",[t._v("描述")]),t._v(" "),e("th",[t._v("关键字")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("非空约束")]),t._v(" "),e("td",[t._v("限制字段的数据不能为null")]),t._v(" "),e("td",[t._v("NOT NULL")])]),t._v(" "),e("tr",[e("td",[t._v("唯一约束")]),t._v(" "),e("td",[t._v("保证该字段的所有数据都是唯一，不重复的")]),t._v(" "),e("td",[t._v("UNIQUE")])]),t._v(" "),e("tr",[e("td",[t._v("主键约束")]),t._v(" "),e("td",[t._v("主键是一行数据的唯一标识，要求非空且唯一")]),t._v(" "),e("td",[t._v("PRIMARY KEY")])]),t._v(" "),e("tr",[e("td",[t._v("默认约束")]),t._v(" "),e("td",[t._v("保存数据时，如果未指定该字段的值，则采用默认值")]),t._v(" "),e("td",[t._v("DEFAULT")])]),t._v(" "),e("tr",[e("td",[t._v("检查约束")]),t._v(" "),e("td",[t._v("保证字段值满足某一条件")]),t._v(" "),e("td",[t._v("CHECK")])]),t._v(" "),e("tr",[e("td",[t._v("外键约束")]),t._v(" "),e("td",[t._v("用来让两张表的数据之间建立连接，保证数据的一致性和完整性")]),t._v(" "),e("td",[t._v("FOREIGN KEY")])])])]),t._v(" "),e("p",[e("strong",[t._v("注意:约束是作用于表中字段上的，可以在创建表/修改表的时候添加约束。")])]),t._v(" "),e("h3",{attrs:{id:"约束演示"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#约束演示"}},[t._v("#")]),t._v(" 约束演示")]),t._v(" "),e("p",[t._v("例子:")]),t._v(" "),e("div",{staticClass:"language-mysql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("create table user(\n    id int primary key auto_increment comment  '主键',\n    name varchar(10) not null unique  comment '姓名',\n    age int check (age>0 && age <=120) comment '年龄',\n    status char(1) default '1' comment  '状态',\n    gender char(1) comment  '性别'\n) comment '用户表';\n")])])]),e("h3",{attrs:{id:"外键约束"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#外键约束"}},[t._v("#")]),t._v(" 外键约束")]),t._v(" "),e("h5",{attrs:{id:"概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[t._v("#")]),t._v(" 概念")]),t._v(" "),e("p",[t._v("​\t"),e("strong",[t._v("外键用来让两张表的数据之间建立连接，从而保证数据的一致性和完整性。")])]),t._v(" "),e("h5",{attrs:{id:"语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[t._v("#")]),t._v(" 语法")]),t._v(" "),e("p",[t._v("1.添加外键")]),t._v(" "),e("p",[t._v("①")]),t._v(" "),e("div",{staticClass:"language-mysql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("CREATE TABLE 表名(\n\n字段名 数据类型\n\n...\n\n[CONSTRAINT]\t[外键名称]\tFOREIGN KEY(外键字段名) REFERENCES 主表(主表列名)\n\n);\n")])])]),e("p",[t._v("②")]),t._v(" "),e("div",{staticClass:"language-mysql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY(外键字段名) REFERENCES 主表(主表列名);\n")])])]),e("p",[t._v("2.删除外键")]),t._v(" "),e("div",{staticClass:"language-mysql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("ALTER TABLE 表名 DROP FOREIGN KEY 外键名称；\n")])])]),e("h5",{attrs:{id:"删除-更新行为"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除-更新行为"}},[t._v("#")]),t._v(" 删除/更新行为")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("行为")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("NO ACTION")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除/更新。(与RESTRICT一致)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("RESTRICT")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除/更新。(与NOACTION一致)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("CASCADE")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有，则也删除/更新外键在子表中的记录。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("SET NULL")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("当在父表中删除对应记录时，首先检查该记录是否有对应外键，如果有则设置子表中该外键值为nul(这就要求该外键允许取null）。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("SET DEFAULT")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("父表有变更时，子表将外键列设置成一个默认的值(Innodb不支持)")])])])]),t._v(" "),e("div",{staticClass:"language-mysql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("ALTER 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段) REFERENCES 主表名(主表字段名) ON UPDATE  删除/更新行为 ON DELETE 删除/更新行为;\n")])])])])}),[],!1,null,null,null);a.default=_.exports}}]);