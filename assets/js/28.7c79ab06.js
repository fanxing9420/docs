(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{769:function(t,e,a){"use strict";a.r(e);var s=a(45),l=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"mysql-事务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql-事务"}},[t._v("#")]),t._v(" MySQL—事务")]),t._v(" "),a("h3",{attrs:{id:"事务简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事务简介"}},[t._v("#")]),t._v(" 事务简介")]),t._v(" "),a("p",[a("strong",[t._v("事务")]),t._v("是一组操作的集合，它是一个不可分割的工作单位，事务会把所有的操作作为一个整体一起向系统提交或撤销操作请求，即这些操作"),a("strong",[t._v("要么同时成功，要么同时失败")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"事务操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事务操作"}},[t._v("#")]),t._v(" 事务操作")]),t._v(" "),a("p",[t._v("1.查看/设置事务提交方式")]),t._v(" "),a("div",{staticClass:"language-mysql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("SELECT @@autocommit;\n\nSET @@autocommit=0;  1代表开启自动提交  0代表关闭自动提交（开启手动提交）\n")])])]),a("p",[t._v("2.提交事务")]),t._v(" "),a("div",{staticClass:"language-mysql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("COMMIT;\n")])])]),a("p",[t._v("3.回滚事务")]),t._v(" "),a("div",{staticClass:"language-mysql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ROLLBACK;\n")])])]),a("p",[t._v("4.开启事务")]),t._v(" "),a("div",{staticClass:"language-mysql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("START TRANSACTION 或 BEGIN\n")])])]),a("h3",{attrs:{id:"事务四大特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事务四大特性"}},[t._v("#")]),t._v(" 事务四大特性")]),t._v(" "),a("p",[t._v("1.原子性（Atomicity):事务是不可分割的最小操作单元，要么全部成功，要么全部失败。")]),t._v(" "),a("p",[t._v("2.一致性（Consistency) ︰事务完成时，必须使所有的数据都保持一致状态。")]),t._v(" "),a("p",[t._v("3.隔离性（isolation)∶数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行。")]),t._v(" "),a("p",[t._v("4.持久性（Durability):事务一旦提交或回滚，它对数据库中的数据的改变就是永久的。")]),t._v(" "),a("h3",{attrs:{id:"并发事务问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#并发事务问题"}},[t._v("#")]),t._v(" 并发事务问题")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("问题")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("脏读")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("一个事务读到另外一个事务还没有提交的数据")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("不可重复读")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("一个事务先后读取同一条记录，但两次读取的数据不同，称之为不可重复读。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("幻读")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("一个事务按照条件查询数据时，没有对应的数据行，但是在插入数据时，又发现这行数据已经存在，好像出现了”幻影“")])])])]),t._v(" "),a("h3",{attrs:{id:"事务隔离级别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事务隔离级别"}},[t._v("#")]),t._v(" 事务隔离级别")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("隔离级别")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("脏读")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("不可重复读")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("幻读")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Read uncommitted")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("√")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Read committed")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("×")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("√")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Repeatable Read(默认)")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("×")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("×")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("√")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Serializable")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("×")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("×")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("×")])])])]),t._v(" "),a("h5",{attrs:{id:"查看事务隔离级别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看事务隔离级别"}},[t._v("#")]),t._v(" 查看事务隔离级别")]),t._v(" "),a("div",{staticClass:"language-mysql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("SELECT @@TRANSACTION_ISOLATION;\n")])])]),a("h5",{attrs:{id:"设置事务隔离级别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置事务隔离级别"}},[t._v("#")]),t._v(" 设置事务隔离级别")]),t._v(" "),a("div",{staticClass:"language-mysql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("SET [SESSION | GLOBAL] TRANSACTION ISOLATION  LEVEL { READ UNCOMMITTED | READ COMMITTED | REPEATABLE READ | SERIALIZABLE}\n")])])]),a("p",[a("strong",[t._v("注意:事务隔离级别越高，数据越安全，但是性能越低。")])])])}),[],!1,null,null,null);e.default=l.exports}}]);